syntax = "proto3";

package seller.v1;

import "googleapis/google/api/annotations.proto";
import "google/protobuf/timestamp.proto";

option go_package = "github.com/nhassl3/servicehub/internal/pb/seller/v1;sellerv1";

service SellerService {
  rpc CreateSeller(CreateSellerRequest) returns (CreateSellerResponse) {
    option (google.api.http) = {
      post: "/api/v1/sellers"
      body: "*"
    };
  }

  rpc GetSellerProfile(GetSellerProfileRequest) returns (GetSellerProfileResponse) {
    option (google.api.http) = {
      get: "/api/v1/sellers/{username}"
    };
  }

  rpc UpdateSeller(UpdateSellerRequest) returns (UpdateSellerResponse) {
    option (google.api.http) = {
      patch: "/api/v1/sellers/me"
      body: "*"
    };
  }
}

message CreateSellerRequest {
  string display_name = 1;
  string description  = 2;
}

message CreateSellerResponse {
  SellerProfile seller = 1;
}

message GetSellerProfileRequest {
  string username = 1;
}

message GetSellerProfileResponse {
  SellerProfile seller = 1;
}

message UpdateSellerRequest {
  string display_name = 1;
  string description  = 2;
  string avatar_url   = 3;
}

message UpdateSellerResponse {
  SellerProfile seller = 1;
}

message SellerProfile {
  string                    id           = 1;
  string                    username     = 2;
  string                    display_name = 3;
  string                    description  = 4;
  string                    avatar_url   = 5;
  double                    rating       = 6;
  int32                     total_sales  = 7;
  google.protobuf.Timestamp created_at   = 8;
  google.protobuf.Timestamp updated_at   = 9;
}
